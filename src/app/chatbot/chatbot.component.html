<div class="chatbot-container">
  
  <!-- Header -->
  <div class="chatbot-header">
    <button class="btn-back" (click)="goBack()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
    </button>
    
    <div class="header-content">
      <div class="bot-avatar">
        <span class="bot-icon">ğŸ¤–</span>
        <span class="status-indicator"></span>
      </div>
      <div class="header-text">
        <h1>Assistant SantÃ© IA</h1>
        <p class="status-text">En ligne</p>
      </div>
    </div>

    <div class="header-actions">
      <!-- Placeholder pour actions futures -->
    </div>
  </div>

  <!-- Messages Container -->
  <div class="messages-container" #messagesContainer>
    <div *ngFor="let message of messages()" 
         [class]="message.isUser ? 'message-wrapper user' : 'message-wrapper bot'">
      
      <!-- Bot Avatar -->
      <div class="message-avatar" *ngIf="!message.isUser">
        <span>ğŸ¤–</span>
      </div>

      <!-- Message Bubble -->
      <div [class]="message.isUser ? 'message-bubble user-bubble' : 'message-bubble bot-bubble'">
        <p class="message-text">{{ message.text }}</p>
        <span class="message-time" *ngIf="message.timestamp">
          {{ message.timestamp | date:'HH:mm' }}
        </span>
      </div>

      <!-- User Avatar -->
      <div class="message-avatar" *ngIf="message.isUser">
        <span>ğŸ‘¤</span>
      </div>
    </div>

    <!-- Loading Indicator -->
    <div class="message-wrapper bot" *ngIf="loading()">
      <div class="message-avatar">
        <span>ğŸ¤–</span>
      </div>
      <div class="message-bubble bot-bubble typing">
        <div class="typing-indicator">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-container">
    <div class="input-wrapper">
      <textarea
        [(ngModel)]="userMessage"
        (keypress)="onKeyPress($event)"
        placeholder="Posez votre question sur la santÃ©..."
        rows="1"
        [disabled]="loading()"
        class="message-input"></textarea>
      
      <button 
        class="btn-send" 
        (click)="sendMessage()"
        [disabled]="!userMessage().trim() || loading()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="22" y1="2" x2="11" y2="13"></line>
          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>
      </button>
    </div>

    <p class="input-hint">
      ğŸ’¡ Conseil : Soyez prÃ©cis dans vos questions pour obtenir les meilleures rÃ©ponses
    </p>
  </div>

</div>