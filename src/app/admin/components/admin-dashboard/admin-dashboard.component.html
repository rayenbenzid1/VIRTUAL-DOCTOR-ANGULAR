<div class="dashboard-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-title">
        <div class="header-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
        </div>
        <div class="header-text">
          <h1>üë®‚Äç‚öïÔ∏è Tableau de bord Admin</h1>
          <p class="header-welcome">Bienvenue de retour, <span class="user-name">{{ userName() }}</span></p>
        </div>
      </div>

      <div class="header-actions">
        <button class="btn-action" (click)="refreshData()" title="Actualiser">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
        <button class="btn-action" (click)="navigateToUserManagement()" title="Gestion des utilisateurs">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
        </button>
        <button class="btn-logout" (click)="logout()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          D√©connexion
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Statistics Cards -->
    <section class="stats-section">
      <div class="stat-card pending-card">
        <div class="stat-icon">‚è≥</div>
        <div class="stat-content">
          <div class="stat-value">{{ pendingCount() }}</div>
          <div class="stat-label">En attente</div>
        </div>
      </div>

      <div class="stat-card activated-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
          <div class="stat-value">{{ activatedCount() }}</div>
          <div class="stat-label">Activ√©s</div>
        </div>
      </div>

      <div class="stat-card total-card">
        <div class="stat-icon">üë®‚Äç‚öïÔ∏è</div>
        <div class="stat-content">
          <div class="stat-value">{{ totalCount() }}</div>
          <div class="stat-label">Total</div>
        </div>
      </div>
    </section>

    <!-- Tabs -->
    <nav class="tabs-navigation">
      <button 
        class="tab-button"
        [class.active]="selectedTab() === 'pending'"
        (click)="selectTab('pending')">
        ‚è≥ En attente
      </button>
      <button 
        class="tab-button"
        [class.active]="selectedTab() === 'activated'"
        (click)="selectTab('activated')">
        ‚úÖ Activ√©s
      </button>
    </nav>

    <!-- Loading State -->
    @if (loading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Chargement des donn√©es...</p>
    </div>
    }

    <!-- Pending Doctors List -->
    @if (!loading() && selectedTab() === 'pending') {
    <section class="doctors-section">
      @if (pendingDoctors().length > 0) {
      <div class="doctors-grid">
        @for (doctor of pendingDoctors(); track doctor.id) {
        <app-doctor-card
          [doctor]="doctor"
          [isPending]="true"
          (approve)="onApprove(doctor)"
          (reject)="onReject(doctor)"
          (viewDetails)="onViewDetails(doctor)">
        </app-doctor-card>
        }
      </div>
      } @else {
      <div class="empty-state">
        <div class="empty-icon">üì≠</div>
        <h3>Aucun m√©decin en attente</h3>
        <p>Tous les m√©decins ont √©t√© trait√©s</p>
      </div>
      }
    </section>
    }

    <!-- Activated Doctors List -->
    @if (!loading() && selectedTab() === 'activated') {
    <section class="doctors-section">
      @if (activatedDoctors().length > 0) {
      <div class="doctors-grid">
        @for (doctor of activatedDoctors(); track doctor.id) {
        <app-doctor-card
          [doctor]="doctor"
          [isPending]="false"
          (viewDetails)="onViewDetails(doctor)">
        </app-doctor-card>
        }
      </div>
      } @else {
      <div class="empty-state">
        <div class="empty-icon">üì≠</div>
        <h3>Aucun m√©decin activ√©</h3>
        <p>Les m√©decins activ√©s appara√Ætront ici</p>
      </div>
      }
    </section>
    }
  </main>

  <!-- Doctor Details Modal -->
  <app-doctor-details-modal
    [isVisible]="showDetailsModal()"
    [doctor]="selectedDoctor()"
    (close)="closeDetailsModal()">
  </app-doctor-details-modal>
</div>